{
  "version": "2.95.0",
  "grid": {
    "layers": {
      "Default layer": {
        "name": "Default layer"
      },
      "admin": {
        "name": "admin"
      }
    },
    "xWidth": 10,
    "yHeight": 10
  },
  "modules": [
    {
      "url": "modules/types/client_interaction/code_executor/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "display": [
                [
                  "editor",
                  "buttons"
                ]
              ],
              "execOnLoad": [
                []
              ],
              "asyncAwait": [
                [
                  "top"
                ]
              ],
              "script": [
                "let marker = API.getData('selectedMarker')\n\nlet data = API.getData('data')\n\nlet selectedMarkers = marker.map( r => r._highlight[0] )\n\nlet selectedData = data.filter( (val, ind, arr) => \n    {return selectedMarkers.includes(val._highlight)} )\n\nlet x = selectedData[0].dataMatrix.filter((val, idx, Arr) => \n        idx % 2 == 0\n    )\n\n//let col = []\n//x.forEach( i => col.push({'_rgb':[0,0,255,1]}) )\n\nlet y = selectedData.map( x => \n    x.dataMatrix.filter((val, idx, Arr) => \n        idx % 2 == 1\n    )\n)\nconsole.log('exec')\n\nlet color = [];\nlet spectra = selectedData.map((e, i) => {\n    let groupColor = e.color.split(\"(\")[1].split(\")\")[0].split(\",\").map(Number)\n    color = []\n    x.forEach( () => color.push({'_rgb': groupColor}) )\n    let s = ({\n        \"type\": 'color', //set to line in new visualizer\n        \"label\": e.ID,\n        \"styles\": {\n            \"unselected\": {\n                \"lineColor\": \"blue\",\n                \"lineWidth\": 3,\n                \"lineStyle\": 4\n            },\n            \"selected\": {\n                \"lineColor\": \"blue\",\n                \"lineWidth\": 5,\n                \"lineStyle\": 4\n            }\n        },\n        \"y\": y[i],\n        \"x\": x,\n        \"color\": color //remove with new visualizer\n        })\n    return s\n    }\n)\n\nAPI.createData('selectedData', selectedData)\nAPI.createData('selectedIndex', selectedMarkers)\nAPI.createData('selectedSpectra', {'data':spectra})\nAPI.createData('modifiedSelectedSpectra', {'data':spectra})\n\n"
              ]
            }
          ],
          "libs": [
            [
              {}
            ]
          ],
          "buttons": [
            [
              {
                "name": "button1",
                "label": "Execute",
                "hide": [],
                "disable": []
              }
            ]
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 55,
            "top": 66
          },
          "size": {
            "width": 61,
            "height": 43
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 0,
            "top": 0
          },
          "size": {
            "width": 61,
            "height": 21
          },
          "zIndex": 0,
          "display": true,
          "title": "exec create data and spectra selected from score plot",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        }
      },
      "id": 1,
      "vars_in": [
        {
          "rel": "inputValue",
          "name": "selectedMarker"
        }
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "jpath": []
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "exec create data and spectra selected from score plot",
      "zindex": 3
    },
    {
      "url": "modules/types/edition/slick_grid/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "slickCheck": [
                [
                  "enableCellNavigation",
                  "rowNumbering",
                  "forceFitColumns",
                  "highlightScroll",
                  "forgetLastActive",
                  "editable",
                  "filterColumns",
                  "keepSelected"
                ]
              ],
              "copyPaste": [
                []
              ],
              "copyPasteOptions": [
                [
                  "newRows"
                ]
              ],
              "autoColumns": [
                []
              ],
              "toolbar": [
                []
              ],
              "colorjpath": [
                [
                  "color"
                ]
              ],
              "slick.defaultColumnWidth": [
                null
              ],
              "slick.rowHeight": [
                null
              ],
              "slick.headerRowHeight": [
                30
              ],
              "slick.selectionModel": [
                "row"
              ],
              "idProperty": [
                ""
              ],
              "filterType": [
                "pref"
              ],
              "filterRow": [
                "// Documentation: https://github.com/NPellet/visualizer/blob/46b40ca86345f8fa313563bf9c6ecb80ba323101/src/modules/types/edition/slick_grid/view.js#L1695-L1735"
              ],
              "customJpaths": [
                ""
              ]
            }
          ],
          "cols": [
            [
              {
                "name": "ID",
                "jpath": [
                  "ID"
                ],
                "editor": "none",
                "forceType": "",
                "formatter": "typerenderer",
                "copyFormatter": "default",
                "visibility": "both",
                "rendererOptions": "",
                "editorOptions": "",
                "hideColumn": []
              },
              {
                "name": "Group",
                "jpath": [
                  "group"
                ],
                "editor": "none",
                "forceType": "",
                "formatter": "typerenderer",
                "copyFormatter": "default",
                "visibility": "both",
                "rendererOptions": "",
                "editorOptions": "",
                "hideColumn": []
              }
            ]
          ],
          "actionCols": [
            [
              {
                "backgroundColor": [
                  255,
                  255,
                  255,
                  0
                ],
                "color": [
                  0,
                  0,
                  0,
                  1
                ],
                "position": "end",
                "clickMode": "text"
              }
            ]
          ],
          "groupings": [
            [
              {
                "getter": []
              }
            ]
          ],
          "actionOutButtons": [
            [
              {}
            ]
          ],
          "data": [
            {
              "saveInView": [
                []
              ],
              "varname": [
                ""
              ],
              "data": [
                "[]"
              ]
            }
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 0,
            "top": 0
          },
          "size": {
            "width": 35,
            "height": 47
          },
          "zIndex": 0,
          "display": true,
          "title": "Selected Data (select on score plot)",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 0,
            "top": 0
          },
          "size": {
            "width": 44,
            "height": 65
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        }
      },
      "id": 2,
      "vars_in": [
        {
          "rel": "list",
          "name": "selectedData"
        }
      ],
      "actions_in": [
        {}
      ],
      "actions_out": [
        {
          "event": "onDoubleClick",
          "rel": "row",
          "jpath": [],
          "name": "reset"
        }
      ],
      "vars_out": [
        {
          "event": "onHover",
          "rel": "row",
          "jpath": [
            "ID"
          ],
          "name": "currentID"
        },
        {
          "event": "onHover",
          "rel": "row",
          "jpath": [
            "dataMatrix"
          ],
          "name": "currentSpectra"
        },
        {
          "event": "onSelect",
          "rel": "row",
          "jpath": [],
          "name": "currentData"
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "Selected Data (select on score plot)",
      "zindex": 3
    },
    {
      "url": "modules/types/science/spectra/spectra_displayer/",
      "configuration": {
        "sections": {
          "graph": [
            {
              "sections": {},
              "groups": {
                "graph": [
                  {
                    "url": [
                      ""
                    ],
                    "zoom": [
                      "xy"
                    ],
                    "wheelAction": [
                      "none"
                    ],
                    "wheelbaseline": [
                      0
                    ],
                    "fullOut": [
                      "none"
                    ],
                    "legend": [
                      "none"
                    ],
                    "legendOptions": [
                      [
                        "isSerieHideable",
                        "isSerieSelectable"
                      ]
                    ],
                    "mouseTracking": [
                      []
                    ],
                    "selectScatter": [
                      [
                        "yes"
                      ]
                    ],
                    "independantYZoom": [
                      []
                    ]
                  }
                ]
              }
            }
          ],
          "axis": [
            {
              "sections": {},
              "groups": {
                "xAxis": [
                  {
                    "checkboxes": [
                      [
                        "display",
                        "main",
                        "sec"
                      ]
                    ],
                    "label": [
                      "PC 1"
                    ],
                    "beforeSpacing": [
                      "0"
                    ],
                    "afterSpacing": [
                      0
                    ],
                    "min": [
                      ""
                    ],
                    "max": [
                      ""
                    ],
                    "nbTicksPrimary": [
                      5
                    ],
                    "axismodification": [
                      "none"
                    ]
                  }
                ],
                "yAxis": [
                  {
                    "checkboxes": [
                      [
                        "display",
                        "main",
                        "sec"
                      ]
                    ],
                    "label": [
                      "PC 2"
                    ],
                    "beforeSpacing": [
                      "0"
                    ],
                    "afterSpacing": [
                      0
                    ],
                    "min": [
                      ""
                    ],
                    "max": [
                      ""
                    ],
                    "nbTicksPrimary": [
                      5
                    ],
                    "fitToAxisOnFromTo": [
                      []
                    ]
                  }
                ]
              }
            }
          ],
          "series": [
            {
              "sections": {},
              "groups": {
                "series": [
                  {
                    "overflow": [
                      []
                    ],
                    "stackVerticalSpacing": [
                      0
                    ]
                  }
                ]
              }
            }
          ],
          "variables": [
            {
              "sections": {},
              "groups": {
                "variables": [
                  [
                    {
                      "variable": "",
                      "axis": "0",
                      "adaptTo": "none",
                      "plotcolor": [
                        1,
                        1,
                        255,
                        1
                      ],
                      "strokewidth": "1",
                      "strokestyle": "1",
                      "plotcontinuous": "continuous",
                      "peakpicking": [],
                      "markers": [],
                      "markerShape": "1",
                      "markerSize": 2,
                      "normalize": "none",
                      "optimizeSlots": [],
                      "tracking": []
                    }
                  ]
                ]
              }
            }
          ],
          "misc": [
            {
              "sections": {},
              "groups": {
                "misc": [
                  {
                    "highlightOptions": [
                      "{}"
                    ]
                  }
                ]
              }
            }
          ]
        },
        "groups": {}
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 36,
            "top": 0
          },
          "size": {
            "width": 97,
            "height": 47
          },
          "zIndex": 0,
          "display": true,
          "title": "Scatter plot (use Alt + draw to select points)",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 45,
            "top": 0
          },
          "size": {
            "width": 77,
            "height": 38
          },
          "zIndex": 0,
          "display": false,
          "title": "Scatter plot (use Alt + draw to select points)",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        }
      },
      "id": 3,
      "vars_in": [
        {
          "rel": "chart",
          "name": "modifiedScores"
        },
        {
          "rel": "chart",
          "name": "ellipse1"
        },
        {
          "rel": "chart",
          "name": "ellipse2"
        },
        {
          "rel": "chart",
          "name": "ellipse3"
        },
        {
          "rel": "chart",
          "name": "ellipse4"
        }
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "event": "onSelectScatter",
          "rel": "selectedData",
          "jpath": [],
          "name": "selectedMarker"
        }
      ],
      "actions_out": [
        {
          "event": "onSelectMarker",
          "rel": "markerInfos",
          "jpath": [],
          "name": "test"
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "Scatter plot (use Alt + draw to select points)",
      "zindex": 3
    },
    {
      "url": "modules/types/client_interaction/code_executor/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "display": [
                [
                  "editor",
                  "buttons"
                ]
              ],
              "execOnLoad": [
                []
              ],
              "asyncAwait": [
                [
                  "top"
                ]
              ],
              "script": [
                "let currentID = API.getData('currentID')\n\nif (currentID != null) { \nlet score = JSON.parse(JSON.stringify(API.getData('score')))\n//let score = API.getData('score').resurrect();\n\nlet index = score.data[0].info.filter( val => val.id == currentID.s_ )[0]._highlight[0]\n//console.log(index)\n\n//score.data[0].styles.unselected[index].fill = \"transparent\"\nscore.data[0].styles.unselected[index].r = 6\nscore.data[0].styles.unselected[index].stroke = \"red\"\n\nlet currentChart = ({\"title\": \"score plot\",\n    \"data\": [{\n        \"type\": \"scatter\",\n        \"info\":[],\n        \"x\":[score.data[0].x[1]],\n        \"y\":[score.data[0].y[1]],\n        \"styles\": {\n            \"unselected\": [\n                {\"fill\": \"transparent\",\n                \"shape\": \"circle\",\n                \"cx\": 0,\n                \"cy\": 0,\n                \"r\": 8,\n                \"height\": \"5px\",\n                \"width\": \"5px\",\n                \"stroke\": \"red\"}]\n            }\n        }]\n})\n\n//API.createData('currentChart', currentChart)\nAPI.createData('modifiedScores', score)\nAPI.createData('currentID', null)\nconsole.log('executed')\n}\n\n"
              ]
            }
          ],
          "libs": [
            [
              {}
            ]
          ],
          "buttons": [
            [
              {
                "name": "button1",
                "label": "Execute",
                "hide": [],
                "disable": []
              }
            ]
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 4,
            "top": 130
          },
          "size": {
            "width": 73,
            "height": 44
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 0,
            "top": 44
          },
          "size": {
            "width": 61,
            "height": 18
          },
          "zIndex": 0,
          "display": true,
          "title": "exec highlight score hoovered in the table",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        }
      },
      "id": 4,
      "vars_in": [
        {
          "rel": "inputValue",
          "name": "currentID"
        }
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "jpath": []
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "exec highlight score hoovered in the table",
      "zindex": 3
    },
    {
      "url": "modules/types/science/spectra/spectra_displayer/",
      "configuration": {
        "sections": {
          "graph": [
            {
              "sections": {},
              "groups": {
                "graph": [
                  {
                    "url": [
                      ""
                    ],
                    "zoom": [
                      "x"
                    ],
                    "wheelAction": [
                      "zoomY"
                    ],
                    "wheelbaseline": [
                      0
                    ],
                    "fullOut": [
                      "none"
                    ],
                    "legend": [
                      null
                    ],
                    "legendOptions": [
                      [
                        "isSerieHideable",
                        "isSerieSelectable"
                      ]
                    ],
                    "mouseTracking": [
                      [
                        "track"
                      ]
                    ],
                    "selectScatter": [
                      []
                    ],
                    "independantYZoom": [
                      []
                    ]
                  }
                ]
              }
            }
          ],
          "axis": [
            {
              "sections": {},
              "groups": {
                "xAxis": [
                  {
                    "checkboxes": [
                      [
                        "display",
                        "flip"
                      ]
                    ],
                    "label": [
                      "ppm"
                    ],
                    "beforeSpacing": [
                      "0"
                    ],
                    "afterSpacing": [
                      0
                    ],
                    "min": [
                      "0"
                    ],
                    "max": [
                      "10"
                    ],
                    "nbTicksPrimary": [
                      5
                    ],
                    "axismodification": [
                      "none"
                    ]
                  }
                ],
                "yAxis": [
                  {
                    "checkboxes": [
                      []
                    ],
                    "label": [
                      "Relative Intensity"
                    ],
                    "beforeSpacing": [
                      "0"
                    ],
                    "afterSpacing": [
                      0
                    ],
                    "min": [
                      ""
                    ],
                    "max": [
                      ""
                    ],
                    "nbTicksPrimary": [
                      5
                    ],
                    "fitToAxisOnFromTo": [
                      []
                    ]
                  }
                ]
              }
            }
          ],
          "series": [
            {
              "sections": {},
              "groups": {
                "series": [
                  {
                    "overflow": [
                      []
                    ],
                    "stackVerticalSpacing": [
                      0
                    ]
                  }
                ]
              }
            }
          ],
          "variables": [
            {
              "sections": {},
              "groups": {
                "variables": [
                  [
                    {
                      "variable": "",
                      "axis": "0",
                      "adaptTo": "none",
                      "plotcolor": [
                        1,
                        1,
                        255,
                        1
                      ],
                      "strokewidth": "1",
                      "strokestyle": "1",
                      "plotcontinuous": "continuous",
                      "peakpicking": [],
                      "markers": [],
                      "markerShape": "1",
                      "markerSize": 2,
                      "normalize": "none",
                      "optimizeSlots": [],
                      "tracking": []
                    }
                  ]
                ]
              }
            }
          ],
          "misc": [
            {
              "sections": {},
              "groups": {
                "misc": [
                  {
                    "highlightOptions": [
                      "{}"
                    ]
                  }
                ]
              }
            }
          ]
        },
        "groups": {}
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 0,
            "top": 48
          },
          "size": {
            "width": 133,
            "height": 43
          },
          "zIndex": 0,
          "display": true,
          "title": "Selected Spectra (current is blue line, hoovering on the table row)",
          "bgColor": [
            0,
            0,
            0,
            0.12
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 45,
            "top": 39
          },
          "size": {
            "width": 77,
            "height": 26
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        }
      },
      "id": 5,
      "vars_in": [
        {
          "rel": "chart",
          "name": "modifiedSelectedSpectra"
        }
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "event": "onTrackClick",
          "rel": "trackData",
          "jpath": [
            "modifiedSelectedSpectra",
            "indexClosest"
          ],
          "name": "currentVariableIndex"
        }
      ],
      "actions_out": [
        {
          "event": "onZoomChange",
          "rel": "fromToX",
          "jpath": [],
          "name": "syncx"
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "Selected Spectra (current is blue line, hoovering on the table row)",
      "zindex": 1
    },
    {
      "url": "modules/types/client_interaction/code_executor/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "display": [
                [
                  "editor",
                  "buttons"
                ]
              ],
              "execOnLoad": [
                []
              ],
              "asyncAwait": [
                [
                  "top"
                ]
              ],
              "script": [
                "let currentID = API.getData('currentID')\n\nif (currentID != null) { \nlet sspectra = JSON.parse(JSON.stringify(API.getData('selectedSpectra')))\n\nlet col = []\nsspectra.data[0].x.forEach( i => col.push( {'_rgb':[0,0,255,1]}) )\n\nsspectra.data.map(e => {\n    return e.label == currentID ? e.color = col : []\n})\n\nAPI.createData('modifiedSelectedSpectra', sspectra)\nAPI.createData('currentID', null)\nconsole.log('executed+')\n}"
              ]
            }
          ],
          "libs": [
            [
              {}
            ]
          ],
          "buttons": [
            [
              {
                "name": "button1",
                "label": "Execute",
                "hide": [],
                "disable": []
              }
            ]
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 4,
            "top": 96
          },
          "size": {
            "width": 70,
            "height": 33
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 0,
            "top": 22
          },
          "size": {
            "width": 61,
            "height": 21
          },
          "zIndex": 0,
          "display": true,
          "title": "exec highlight spectra hooverd in the table",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        }
      },
      "id": 6,
      "vars_in": [
        {
          "rel": "inputValue",
          "name": "currentID"
        }
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "jpath": []
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "exec highlight spectra hooverd in the table",
      "zindex": 3
    },
    {
      "url": "modules/types/client_interaction/code_executor/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "display": [
                [
                  "editor",
                  "buttons"
                ]
              ],
              "execOnLoad": [
                []
              ],
              "asyncAwait": [
                [
                  "top"
                ]
              ],
              "script": [
                "console.log(GD)\nvar options = ({\n    dataClass: true,\n    binaryDataClassMatrix: true,\n    seed: 22,\n    classes: [\n        {\n            nbSample: 500,\n            elements: [\n                {\n                    index: 0,\n                    distribution: {\n                        name: 'normal',\n                        parameters: {\n                            mean: 9.4,\n                            standardDeviation: 0.1\n                        }\n                    }\n                },\n                {\n                    index: 1,\n                    distribution: {\n                        name: 'normal',\n                        parameters: {\n                            mean: 9.4,\n                            standardDeviation: 0.1\n                        }\n                    }\n                },\n                {\n                    index: 2,\n                    distribution: {\n                        name: 'normal',\n                        parameters: {\n                            mean: 9.4,\n                            standardDeviation: 0.1\n                        }\n                    }\n                }\n            ]\n        },\n        {\n            nbSample: 500,\n            elements: [\n                {\n                    index: 0,\n                    distribution: {\n                        name: 'normal',\n                        parameters: {\n                            mean: 9.4,\n                            standardDeviation: 0.1\n                        }\n                    }\n                },\n                {\n                    index: 1,\n                    distribution: {\n                        name: 'normal',\n                        parameters: {\n                            mean: 10.3,\n                            standardDeviation: 0.15\n                        }\n                    }\n                },\n                {\n                    index: 2,\n                    distribution: {\n                        name: 'normal',\n                        parameters: {\n                            mean: 9.4,\n                            standardDeviation: 0.1\n                        }\n                    }\n                }\n            ]\n        }\n    ]\n});\nvar pureElements = ([\n    [0, 0, 0, 1, 0, 0, 0],\n    [0, 0, 0, 0, 0, 1, 0],\n    [0, 1, 0, 0, 0, 0, 0]\n]);\n\nvar dataset = GD(pureElements, options);\nconsole.log(dataset);"
              ]
            }
          ],
          "libs": [
            [
              {
                "lib": "ML",
                "alias": "ML"
              },
              {
                "lib": "http://127.0.0.1:5474/gd.js",
                "alias": "GD"
              }
            ]
          ],
          "buttons": [
            [
              {
                "name": "button1",
                "label": "Execute",
                "hide": [],
                "disable": []
              }
            ]
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 0,
            "top": 0
          },
          "size": {
            "width": 20,
            "height": 20
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 0,
            "top": 84
          },
          "size": {
            "width": 61,
            "height": 15
          },
          "zIndex": 0,
          "display": true,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "admin"
        }
      },
      "id": 7,
      "vars_in": [
        {}
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "jpath": []
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "",
      "zindex": 3
    },
    {
      "url": "modules/types/client_interaction/code_executor/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "display": [
                [
                  "editor",
                  "buttons"
                ]
              ],
              "execOnLoad": [
                []
              ],
              "asyncAwait": [
                [
                  "top"
                ]
              ],
              "script": [
                "// get access to golbal variables ellipse1 and modifiedScores\nlet ellipse = API.getData('ellipse1').resurrect();\nlet scores = API.getData('modifiedScores').resurrect();\n\n// add a new point at 0.0\nscores.data[0].x.push(0);\nscores.data[0].y.push(0);\n\n// add style options for the new point\nscores.data[0].styles.unselected.push({\n            \"fill\": \"rgba(0,0,0,1)\",\n            \"shape\": \"circle\",\n            \"cx\": 0,\n            \"cy\": 0,\n            \"r\": 8,\n            \"height\": \"5px\",\n            \"width\": \"5px\",\n            \"stroke\": \"transparent\"\n          });\nscores.data[0].styles.selected.push({\n            \"fill\": \"rgba(0,0,0,1)\",\n            \"shape\": \"circle\",\n            \"cx\": 0,\n            \"cy\": 0,\n            \"r\": 12,\n            \"height\": \"5px\",\n            \"width\": \"5px\",\n            \"stroke\": \"transparent\"\n          });\n          \n// add info for the new point\nscores.data[0].info.push({id: \"test\", _highlight: \"test\"})\n\n// export the modified score back to the global context\nAPI.createData('modifiedScores', scores)\n\n// log the output in the browser console\nconsole.log(scores.data[0]);"
              ]
            }
          ],
          "libs": [
            [
              {}
            ]
          ],
          "buttons": [
            [
              {
                "name": "button1",
                "label": "Execute",
                "hide": [],
                "disable": []
              }
            ]
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 0,
            "top": 92
          },
          "size": {
            "width": 64,
            "height": 46
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 0,
            "top": 63
          },
          "size": {
            "width": 61,
            "height": 20
          },
          "zIndex": 0,
          "display": true,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "admin"
        }
      },
      "id": 8,
      "vars_in": [
        {}
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "jpath": []
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "",
      "zindex": 3
    },
    {
      "url": "modules/types/client_interaction/code_executor/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "display": [
                [
                  "editor",
                  "buttons"
                ]
              ],
              "execOnLoad": [
                []
              ],
              "asyncAwait": [
                [
                  "top"
                ]
              ],
              "script": [
                "let index = API.getData('currentVariableIndex').resurrect();\nlet cov = API.getData('correlationMatrix');\nlet xAxis = API.getData('xAxis');\n\nindex = Math.round(index);\nconsole.log(\"index: \" + index);\n\nlet loadingsColors = cov[index];\n\nvar max = loadingsColors.reduce(function(a, b) {\n    return Math.max(a, b);\n});\n\nvar min = loadingsColors.reduce(function(a, b) {\n    return Math.min(a, b);\n});\n\nlet unselectedScale = chroma.scale(['blue', 'cyan',  'yellow', 'red']).domain([0, max]).mode('lch');\n\nlet colorScale = loadingsColors.map((x, j) => unselectedScale(x));\n\nlet currentData = API.getData('currentData').resurrect();\nconsole.log(currentData.ID);\nlet currentSpectra = currentData.dataMatrix.filter((e, i) => i % 2 == 1);\n\nlet spectra = [];\nspectra = {'type': 'color', x: xAxis, y: currentSpectra, 'color': colorScale};\n\nAPI.createData('coloredSpectra', spectra);\nconsole.log(spectra);\n\n// let currentID = API.getData('selectedID')\n// console.log(currentID)\n// if (currentID != null) { \n// let sspectra = JSON.parse(JSON.stringify(API.getData('selectedSpectra')))\n\n// sspectra.data.map(e => {\n//     return e.label == currentID ? e.color = colorScale : []\n// })\n\n// API.createData('modifiedSelectedSpectra', sspectra)\n// API.createData('currentID', null)\n// console.log('color')\n// }"
              ]
            }
          ],
          "libs": [
            [
              {
                "lib": "chroma",
                "alias": "chroma"
              }
            ]
          ],
          "buttons": [
            [
              {
                "name": "button1",
                "label": "Execute",
                "hide": [],
                "disable": []
              }
            ]
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 0,
            "top": 0
          },
          "size": {
            "width": 20,
            "height": 20
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 62,
            "top": 21
          },
          "size": {
            "width": 81,
            "height": 64
          },
          "zIndex": 0,
          "display": true,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "admin"
        }
      },
      "id": 9,
      "vars_in": [
        {
          "rel": "inputValue",
          "name": "currentVariableIndex"
        },
        {
          "rel": "inputValue",
          "name": "currentData"
        }
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "jpath": []
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "",
      "zindex": 3
    },
    {
      "url": "modules/types/science/spectra/spectra_displayer/",
      "configuration": {
        "sections": {
          "graph": [
            {
              "sections": {},
              "groups": {
                "graph": [
                  {
                    "url": [
                      ""
                    ],
                    "zoom": [
                      "x"
                    ],
                    "wheelAction": [
                      "zoomY"
                    ],
                    "wheelbaseline": [
                      0
                    ],
                    "fullOut": [
                      "none"
                    ],
                    "legend": [
                      null
                    ],
                    "legendOptions": [
                      [
                        "isSerieHideable",
                        "isSerieSelectable"
                      ]
                    ],
                    "mouseTracking": [
                      [
                        "track"
                      ]
                    ],
                    "selectScatter": [
                      []
                    ],
                    "independantYZoom": [
                      []
                    ]
                  }
                ]
              }
            }
          ],
          "axis": [
            {
              "sections": {},
              "groups": {
                "xAxis": [
                  {
                    "checkboxes": [
                      [
                        "display",
                        "flip"
                      ]
                    ],
                    "label": [
                      "ppm"
                    ],
                    "beforeSpacing": [
                      "0"
                    ],
                    "afterSpacing": [
                      0
                    ],
                    "min": [
                      "0"
                    ],
                    "max": [
                      "10"
                    ],
                    "nbTicksPrimary": [
                      5
                    ],
                    "axismodification": [
                      "none"
                    ]
                  }
                ],
                "yAxis": [
                  {
                    "checkboxes": [
                      []
                    ],
                    "label": [
                      "Relative Intensity"
                    ],
                    "beforeSpacing": [
                      "0"
                    ],
                    "afterSpacing": [
                      0
                    ],
                    "min": [
                      ""
                    ],
                    "max": [
                      ""
                    ],
                    "nbTicksPrimary": [
                      5
                    ],
                    "fitToAxisOnFromTo": [
                      []
                    ]
                  }
                ]
              }
            }
          ],
          "series": [
            {
              "sections": {},
              "groups": {
                "series": [
                  {
                    "overflow": [
                      []
                    ],
                    "stackVerticalSpacing": [
                      0
                    ]
                  }
                ]
              }
            }
          ],
          "variables": [
            {
              "sections": {},
              "groups": {
                "variables": [
                  [
                    {
                      "variable": "",
                      "axis": "0",
                      "adaptTo": "none",
                      "plotcolor": [
                        1,
                        1,
                        255,
                        1
                      ],
                      "strokewidth": "1",
                      "strokestyle": "1",
                      "plotcontinuous": "continuous",
                      "peakpicking": [],
                      "markers": [],
                      "markerShape": "1",
                      "markerSize": 2,
                      "normalize": "none",
                      "optimizeSlots": [],
                      "tracking": []
                    }
                  ]
                ]
              }
            }
          ],
          "misc": [
            {
              "sections": {},
              "groups": {
                "misc": [
                  {
                    "highlightOptions": [
                      "{}"
                    ]
                  }
                ]
              }
            }
          ]
        },
        "groups": {}
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 0,
            "top": 51
          },
          "size": {
            "width": 133,
            "height": 19
          },
          "zIndex": 0,
          "display": true,
          "title": "Selected Spectra (current is blue line, hoovering on the table row)",
          "bgColor": [
            0,
            0,
            0,
            0.12
          ],
          "wrapper": false,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 45,
            "top": 39
          },
          "size": {
            "width": 77,
            "height": 26
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        }
      },
      "id": 10,
      "vars_in": [
        {
          "rel": "chart",
          "name": "coloredSpectra"
        }
      ],
      "actions_in": [
        {
          "rel": "fromToX",
          "name": "syncx"
        }
      ],
      "vars_out": [
        {
          "event": "onTrackClick",
          "rel": "trackData",
          "jpath": [
            "modifiedSelectedSpectra",
            "indexClosest"
          ],
          "name": "currentVariableIndex"
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "Selected Spectra (current is blue line, hoovering on the table row)",
      "zindex": 2
    },
    {
      "url": "modules/types/display/template-twig/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "selectable": [
                []
              ],
              "template": [
                "<font size=+1>\nindex: {{currentVariableIndex}}\n</font>"
              ],
              "modifyInForm": [
                []
              ],
              "debouncing": [
                0
              ],
              "formOptions": [
                [
                  "keepFormValueIfDataUndefined"
                ]
              ]
            }
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 121,
            "top": 51
          },
          "size": {
            "width": 15,
            "height": 5
          },
          "zIndex": 0,
          "display": true,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": false,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 0,
            "top": 0
          },
          "size": {
            "width": 20,
            "height": 20
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "admin"
        }
      },
      "id": 13,
      "vars_in": [
        {
          "rel": "value",
          "name": "currentVariableIndex"
        }
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "jpath": []
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "title": "",
      "zindex": 11
    },
    {
      "url": "modules/types/edition/rich_text/",
      "configuration": {
        "sections": {},
        "groups": {
          "group": [
            {
              "editable": [
                [
                  "isEditable"
                ]
              ],
              "debouncing": [
                0
              ],
              "modifyInVariable": [
                []
              ],
              "storeInView": [
                [
                  "yes"
                ]
              ],
              "autoHeight": [
                []
              ],
              "bgColor": [
                [
                  255,
                  242,
                  204,
                  1
                ]
              ],
              "postit": [
                [
                  "yes"
                ]
              ],
              "html": [
                [
                  "yes"
                ]
              ]
            }
          ]
        }
      },
      "layers": {
        "Default layer": {
          "position": {
            "left": 134,
            "top": 3
          },
          "size": {
            "width": 22,
            "height": 41
          },
          "zIndex": 0,
          "display": true,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "Default layer"
        },
        "admin": {
          "position": {
            "left": 0,
            "top": 0
          },
          "size": {
            "width": 20,
            "height": 20
          },
          "zIndex": 0,
          "display": false,
          "title": "",
          "bgColor": [
            255,
            255,
            255,
            0
          ],
          "wrapper": true,
          "created": true,
          "name": "admin"
        }
      },
      "id": 14,
      "vars_in": [
        {}
      ],
      "actions_in": [
        {}
      ],
      "vars_out": [
        {
          "jpath": []
        }
      ],
      "actions_out": [
        {
          "jpath": []
        }
      ],
      "toolbar": {
        "custom": [
          [
            {
              "title": "",
              "icon": "",
              "action": "",
              "position": "begin",
              "color": [
                100,
                100,
                100,
                1
              ]
            }
          ]
        ],
        "common": [
          {
            "toolbar": [
              [
                "Open Preferences"
              ]
            ]
          }
        ]
      },
      "css": [
        {
          "fontSize": [
            ""
          ],
          "fontFamily": [
            ""
          ]
        }
      ],
      "richtext": "<p>&nbsp;</p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-size:14px\">First select some points in the score plot using Alt+Draw. The selected spectra will be displayed in the spectra viewer below and their group in the table on the left.</span></p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-size:14px\">Hovering over the items in the table highlight the current spectrum in blue.</span></p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-size:14px\">Clicking on a variable in the spectra display (bottom) trigger the display of the current spectrum color coded using the correlation matrix provided from R.</span></p>\n\n<p>&nbsp;</p>\n\n<p><span style=\"font-size:14px\">Clicking on table element will re-draw the colored trace with the newly selected spectrum.</span></p>\n\n<p>&nbsp;</p>\n\n<p><strong><span style=\"font-size:14px\">Double click on the spectra or scores will reset the zoom.</span></strong></p>\n",
      "title": ""
    }
  ],
  "variables": [
    {
      "varname": "data",
      "jpath": [
        "data"
      ]
    },
    {
      "varname": "score",
      "jpath": [
        "score12"
      ]
    },
    {
      "varname": "ellipse1",
      "jpath": [
        "ellipse"
      ]
    },
    {
      "varname": "ellipse2",
      "jpath": [
        "ellipse2"
      ]
    },
    {
      "varname": "ellipse3",
      "jpath": [
        "ellipse3"
      ]
    },
    {
      "varname": "ellipse4",
      "jpath": [
        "ellipse4"
      ]
    },
    {
      "varname": "correlationMatrix",
      "jpath": [
        "correlationMatrix"
      ]
    },
    {
      "varname": "xAxis",
      "jpath": [
        "xAxis"
      ]
    }
  ],
  "aliases": [
    {
      "path": "https://www.lactame.com/lib/ml/HEAD/ml",
      "alias": "ML"
    }
  ],
  "configuration": {
    "title": "visualizeR pcaExplorer 1.1"
  },
  "actionscripts": [
    {
      "sections": {},
      "groups": {
        "action": [
          {
            "name": [
              null
            ],
            "script": [
              null
            ]
          }
        ]
      }
    }
  ],
  "init_script": [
    {
      "sections": {},
      "groups": {
        "general": [
          {
            "script": [
              "let scores = API.getData('score')\nAPI.createData('modifiedScores', scores)"
            ]
          }
        ]
      }
    }
  ],
  "custom_filters": [
    {
      "sections": {
        "modules": [
          {
            "sections": {},
            "groups": {
              "modules": [
                [
                  {}
                ]
              ]
            }
          }
        ],
        "filtersLib": [
          {
            "sections": {},
            "groups": {
              "filters": [
                [
                  {}
                ]
              ]
            }
          }
        ],
        "filters": [
          {
            "sections": {},
            "groups": {
              "filter": [
                {
                  "name": [
                    null
                  ],
                  "script": [
                    null
                  ]
                }
              ],
              "libs": [
                [
                  {}
                ]
              ]
            }
          }
        ]
      },
      "groups": {}
    }
  ],
  "actionfiles": [
    {
      "sections": {},
      "groups": {
        "action": [
          [
            {}
          ]
        ]
      }
    }
  ]
}

