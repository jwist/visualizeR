'use strict';define(['jquery','src/header/components/default','src/util/versioning','src/util/util','uri/URI','lib/semver/semver'],function(a,b,c,d,e,f){'use strict';function g(){}function h(){return m||(m=Promise.resolve(a.getJSON(l))),m}function j(p){var q;return'query'===n?q=p.query(!0):'fragment'===n&&(q=p.fragment(!0)),q}function k(p,q,r){return'query'===n?p.setQuery(q,r):'fragment'===n&&(p.removeFragment(q),p.addFragment(q,r)),p}var l,m,n,o;return d.inherits(g,b,{initImpl:function(){l=this.options.url,n=this.options.queryType||'query',this.minVersion=this.options.minVersion&&f.valid(this.options.minVersion)?this.options.minVersion:'0.0.0'},_onClick:function(){var q=this;this.setStyleOpen(this._open),this._open?(o&&o!==this&&o._open&&o.onClick(),o=q,this.doElements()):this.close()},doElements:function(){var t,q=this,r=new e(document.location.href),s=j(r);t=s.v?s.v:'v'+c.version,h().then((u)=>{for(var x,v=q.$_elToOpen=a('<ul />'),w=0;w<u.length;w++)if(x=u[w],!(f.valid(x)&&f.lt(x,this.minVersion))){var y=t===x;v.append(q._buildSubElement(u[w],y))}q.open()})},_buildSubElement:function(q,r){var s=(r?'\u2022 ':'')+q,t=this,u=a('<li />').text(s);return u.addClass('hasEvent').bind('click',function(){t.load(q),t.onClick()}),u},load:function(q){var r=new e(document.location.href),s=j(r);s.v!==q&&(k(r,'v',q),document.location=r.href(),'fragment'===n&&document.location.reload())}}),g});
