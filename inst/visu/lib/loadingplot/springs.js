'use strict';var _Mathmax=Math.max,_Mathmin=Math.min,_Mathpow=Math.pow;define(function(){function a(b){this.labels=[],this.coords=[],this.lines=[],this.els=[],this.svg=b}return a.prototype.addElement=function(){},a.prototype.resolve=function(){var b=this.svg.getElementsForSprings(),c=b[0],d=b[1];computeSprings(c,this.svg._zoom);for(var e=0;e<c.length;e++)c[e][6]=0,c[e][7]=0,isNaN(c[e][0])?console.log('Error'):(d[e][0].setAttributeNS(null,'x',c[e][0]),d[e][0].setAttributeNS(null,'y',c[e][1]),d[e][0].setAttributeNS(null,'text-anchor',c[e][0]<c[e][4]?'end':'start'),d[e][1].setAttributeNS(null,'display','none'),d[e][1].setAttribute('display','block'),d[e][1].setAttribute('stroke','black'),d[e][1].setAttribute('vector-effect','non-scaling-stroke'),d[e][1].setAttribute('x1',c[e][0]),d[e][1].setAttribute('x2',c[e][4]),d[e][1].setAttribute('y1',c[e][1]-c[e][3]/2),d[e][1].setAttribute('y2',c[e][5]))},a.prototype.allow=function(){this.allowed=!0},a.prototype.forbid=function(){this.allowed=!1},a});function computeSprings(a,b){for(var p,q,r,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,M,N,O,P,Q,R,g=6/b,h=0.5,k=0.2,n=0;n++,!(2e3<n);){for(p=!0,q=0,r=a.length-1;0<=r;r--){for(t=a[r],O=[0,0],w=t[0]-t[4],x=t[1]-t[5],y=_Mathpow(_Mathpow(w,2)+_Mathpow(x,2),1/2),y<t[10]?(0==y?(t[0]+=t[6]*(Math.random()-0.5),t[1]+=t[6]*(Math.random()-0.5)):(t[0]=(t[0]-t[4])*(t[8]/y)+t[4],t[1]=(t[1]-t[5])*(t[8]/y)+t[5]),p=!1):(O[0]-=g*_Mathpow(y-t[8],2)*w/y,O[1]-=g*_Mathpow(y-t[8],2)*x/y),B=t[1]+1.4*t[3],F=t[1]-1.4*t[3],t[0]>t[4]?(z=t[0]+1.1*t[2],D=t[0]-0.1*t[2],P=t[0]+t[2]/2):(D=t[0]-1.1*t[2],z=t[0]+0.1*t[2],P=t[0]-t[2]/2),v=a.length-1;0<=v;v--)v!=r&&(u=a[v],C=u[1]+1.4*u[3],G=u[1]-1.4*u[3],u[0]>u[4]?(A=u[0]+1.1*u[2],E=u[0]-0.1*u[2],Q=u[0]+u[2]/2):(E=u[0]-1.1*u[2],A=u[0]+0.1*u[2],Q=u[0]-u[2]/2),H=_Mathmin(z,A)-_Mathmax(D,E),I=_Mathmin(B,C)-_Mathmax(F,G),J=_Mathmax(H,0)*_Mathmax(I,0),0==J||(K=J*(8/b),R=Q-P,M=u[1]+u[3]/2-t[1]-t[3]/2,N=_Mathpow(R*R+M*M,0.5),O[0]-=K*R/N/(t[2]*t[3]),O[1]-=K*M/N,0.5/(t[2]*t[3])));t[6]=(t[6]+k*O[0])*h,t[7]=(t[7]+k*O[1])*h,t[0]+=k*t[6],t[1]+=k*t[7],q+=5e6*(_Mathpow(t[6],2)+_Mathpow(t[7],2))}if(isNaN(q))break;if(p&&0>q)break}}
