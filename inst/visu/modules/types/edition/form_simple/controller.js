'use strict';define(['modules/default/defaultcontroller','lib/formcreator/formcreator','src/util/datatraversing'],function(a,b,c){'use strict';function d(){}function e(g){var h={},j=g.sections.main[0].groups.main[0];for(var k in j)h[k]=f(j[k]);return h}function f(g){return 1===g.length?g[0]:g}return $.extend(!0,d.prototype,a),d.prototype.moduleInformation={name:'Simple Form',description:'A simple module allowing one to display a form in the module',author:'Norman Pellet, Micha\xEBl Zasso',date:'01.09.2014',license:'MIT',cssClass:'form_simple'},d.prototype.references={input_object:{label:'Input object',type:'object'},output_object:{type:'object',label:'Output object'},formatted_output:{type:'object',label:'Formatted output object'}},d.prototype.events={onChange:{label:'Form has changed',refVariable:['output_object','formatted_output'],refAction:['output_object','formatted_output']},formTriggered:{label:'The button was clicked',refAction:['output_object','formatted_output'],refVariable:['output_object','formatted_output']}},d.prototype.variablesIn=['input_object'],d.prototype.configurationStructure=function(){var g=[],h=this.module.getDataFromRel('input_object');return h&&(h=h.get(),c.getJPathsFromElement(h,g)),{sections:{structure:b.makeConfig({jpaths:g,name:'Fill with'}),trigger:{options:{title:'Trigger'},groups:{trigger:{options:{type:'list'},fields:{triggerType:{type:'combo',title:'Trigger type',options:[{key:'btn',title:'Button'},{key:'change',title:'On change'},{key:'both',title:'Both'}],displaySource:{btn:'btn',change:'change',both:'both'}},buttonLabel:{type:'text',title:'Button label',default:'OK',displayTarget:['btn','both']},debounce:{type:'float',title:'Debounce',default:0,displayTarget:['change','both']}}}}},formdata:{options:{title:'Form data'},groups:{formdata:{options:{type:'list',multiple:!1},fields:{replaceEntryVar:{type:'checkbox',title:'Replace entry variable',options:{replace:''}}}}}},template:{options:{title:'Template'},groups:{template:{options:{type:'list',multiple:!1},fields:{file:{type:'text',title:'Template file'},html:{type:'jscode',title:'HTML template',mode:'html',default:'<span class="form-dyn" data-form-content="field:name:label"></span>\n<div class="form-dyn" data-form-content="field:name:dom"></div>'}}}}}}}},d.prototype.configFunctions={replaceObj:function(h){return'replace'==h}},d.prototype.configAliases={structure:['sections','structure'],tpl_file:['sections','template',0,'groups','template',0,'file',0],tpl_html:['sections','template',0,'groups','template',0,'html',0],trigger:['sections','trigger',0,'groups','trigger',0,'triggerType',0],debounce:['sections','trigger',0,'groups','trigger',0,'debounce',0],replaceObj:['sections','formdata',0,'groups','formdata',0,'replaceEntryVar',0,0],btnLabel:['sections','trigger',0,'groups','trigger',0,'buttonLabel',0]},d.prototype.valueChanged=function(g){if(this.module.getConfiguration('replaceObj'))this.setVarFromEvent('onChange','output_object','input_object',[]),this.sendActionFromEvent('onChange','output_object',g);else{var h=e(g);this.createDataFromEvent('onChange','formatted_output',h),this.createDataFromEvent('onChange','output_object',g),this.sendActionFromEvent('onChange','formatted_output',h)}},d.prototype.formTriggered=function(g){if(this.module.getConfiguration('replaceObj'))this.setVarFromEvent('formTriggered','output_object','input_object',[]);else{var h=e(g);this.createDataFromEvent('formTriggered','formatted_output',h),this.createDataFromEvent('formTriggered','output_object',g)}this.sendActionFromEvent('formTriggered','formatted_output',h),this.sendActionFromEvent('formTriggered','output_object',g)},d});
