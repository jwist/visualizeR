'use strict';define(['modules/default/defaultview','src/util/util','jsoneditor','src/util/context','jquery','ace/ace'],function(a,b,c,d,f,g){'use strict';function h(){this._id=b.getNextUniqueId()}return b.loadCss('components/jsoneditor/dist/jsoneditor.min.css'),f.extend(!0,h.prototype,a,{init(){this.dom||(this.dom=f('<div id="'+this._id+'"></div>').css({height:'100%',width:'100%'}),this.module.getDomContent().html(this.dom))},blank:{value(){this.editor.set({})}},inDom(){this.dom.empty();var i=this.module.getConfiguration('editable');'text'===i&&(i='code'),this.expand=!!this.module.getConfiguration('expanded',!1)[0],this.storeObject=!!this.module.getConfiguration('storeObject',!1)[0],this.changeInputData(DataObject.check(JSON.parse(this.module.getConfiguration('storedObject')),!0)),this.editor=new c(document.getElementById(this._id),{mode:i,modes:['view','tree','code'],ace:g,theme:'ace/theme/textmate',onChange:()=>{var j;try{j=this.editor.get()}catch(k){j='Invalid JSON: '+k.message}this.module.controller.sendValue(j,'onObjectChange')},onModeChange:()=>this.setSendButton(),search:this.module.getConfigurationCheckbox('searchBox','search')}),this.module.getConfigurationCheckbox('sendButton','send')&&this.setSendButton(),this.update.value.call(this,this.inputData),this.resolveReady()},setSendButton:function(){var j=this.dom.find('.jsoneditor-menu').prepend('<button class="send" style="width: 45px; float: left; background: none; font-size: small;">\n    <span style="font-size: 10pt; color: black">Send</span>\n</button>').find('button.send');j.on('click',()=>{this.module.controller.sendValue(this.editor.get(),'onObjectSend')}).on('mouseenter',function(){f(this).css('background-color','#f0f2f5')}).on('mouseleave',function(){f(this).css('background-color','#e3eaf6')}).css('background-color','#e3eaf6')},update:{value(i){this.module.getConfigurationCheckbox('displayValue','display')&&(i=i.get()),this.changeInputData(i);var j=this.inputData.resurrect();this.editor.set(JSON.parse(JSON.stringify(j))),this.expand&&this.editor.expandAll&&this.editor.expandAll(),this.module.controller.sendValue(j,'onObjectChange')}},changeInputData(i){this.inputData===i||(this.inputData=i)}}),h});
