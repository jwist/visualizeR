'use strict';define(['modules/default/defaultview','jquery','src/util/api','src/util/util','components/jit/Jit/jit'],function(a,b,c,d,e){'use strict';function f(){this._id=d.getNextUniqueId()}function g(){this.chart.canvas.clear()}function h(l){var n,m=l.data;if(1===m.length){m=m[0];var o=m.y,p=o.length;n={values:Array(p)};var r,s,q=m.info||[];if(q[0]){if(q[0].color){r=Array(p);for(var t=0;t<p;t++)r[t]=q[t].color;n.color=r}if(q[0].name){s=Array(p);for(var t=0;t<p;t++)s[t]=q[t].name}}for(var t=0;t<p;t++)n.values[t]={values:[o[t]],label:s[t]||'label_'+t}}else{n={};var p=m.length,u=m[0].y.length;n.values=Array(u),n.label=Array(u);for(var t=0;t<p;t++)for(var v=0;v<u;v++){var w=m[t],o=w.y;0===t&&(n.values[v]={values:Array(p),label:'label2 '+v},n.label[v]=w.label),n.values[v].values[t]=o[v]}}return n}function k(l){for(var m=l.length,n={values:Array(m)},o=0;o<m;o++)n.values[o]={values:[l[o]],label:'label_'+o};return n}return b.extend(!0,f.prototype,a,{init:function(){this.dom||(this.dom=b('<div id="'+this._id+'"></div>').css({height:'100%',width:'100%'}),this.module.getDomContent().html(this.dom));var n,m=this.module.getConfiguration('labelColor');m&&0!==m[3]&&(n=d.rgbToHex(m[0],m[1],m[2])),this.chartOptions={injectInto:this._id,animate:!1,showLabels:this.module.getConfiguration('showLabels'),labelOffset:20,offset:30,hoveredColor:!1,updateHeights:this.module.getConfiguration('updateHeights'),sliceOffset:this.module.getConfiguration('sliceOffset'),Label:{color:n}}},onResize:function(){this.dom.empty(),this.chart=new e.PieChart(this.chartOptions),this._data&&this.setData(this._data),this.resolveReady()},update:{chart:function(m){if(m){var n=h(m.get());this._data=n,this.setData(n)}},yArray:function(m){if(m){var n=k(m.get());this._data=n,this.setData(n)}}},setData:function(m){this.chart.loadJSON(m)},blank:{chart:g,yArray:g}}),f});
