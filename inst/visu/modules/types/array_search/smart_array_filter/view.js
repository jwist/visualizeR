'use strict';define(['jquery','modules/default/defaultview','lodash'],function(a,b,c){'use strict';function d(){this._query=null,this._data=null,this._originalData=null}return a.extend(!0,d.prototype,b,{inDom:function(){this.module.getDomContent().empty();var f=this._fontSize=this.module.getConfiguration('fontSize'),g=this._div=a('<div>').css({width:'100%',fontSize:f+'px'}).appendTo(this.module.getDomContent()),h=this._input=a('<input type="text" />').css({padding:'0px 0px',margin:'0',display:'inline-block',fontSize:f+'px'}).attr('placeholder',this.module.getConfiguration('placeholder','')).appendTo(g);this._query||(this._query=this.module.getConfiguration('initialValue')),h.val(this._query);var i=this.module.getConfiguration('debounce');h.on('keyup',c.debounce(()=>{var j=h.val();this.onQuery(j)},i)),g.append('&nbsp;<i class="fa fa-search"></i>'),this.resizeInput(),this.resolveReady()},onQuery:function(f){f===this._query||(this._query=f,this.module.controller.onQuery(f))},blank:{input:function(){this._data=null,this._originalData=null}},update:{input:function(f){this._data=JSON.parse(JSON.stringify(f)),this._originalData=f.slice(),this.module.controller.onQuery(this._query||'')}},onActionReceive:{clearQuery:function(){this._input.val(''),this.onQuery('')},setQuery:function(f){f+='',this._input.val(f),this.onQuery(f)},appendQuery:function(f){f+='',this._query&&f&&(f=this._query+' '+f),this._input.val(f),this.onQuery(f)}},resizeInput:function(){var f=this._div.width();this._input.css('width',f-2*this._fontSize)},onResize:function(){this.resizeInput()}}),d});
