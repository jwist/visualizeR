'use strict';define(['modules/default/defaultview','src/util/util','jquery'],function(a,b,c){'use strict';function d(){}return c.extend(!0,d.prototype,a,{init:function(){this.dom=c('<div />');var g=this,h=c('<div class="ci-navigation-navigarrow"></div>');this.domNavig=c('<div />').addClass('ci-navigation-navig').append(h.clone().addClass('top')).append(h.clone().addClass('left')).append(h.clone().addClass('right')).append(h.clone().addClass('bottom')).on('mousedown','.ci-navigation-navigarrow',function(i){g.moveStart(i)}),this.domZoom=c('<div class="ci-navigation-navigzoom"></div>'),this._zoomWidget=this.domZoom.slider({height:100,orientation:'vertical',min:0,step:0.01,max:1,value:0.5,slide:function(j,k){g.zoom(k.value)}}),this.dom.append(this.domNavig).append(this.domZoom),this.module.getDomContent().html(this.dom),this.cx=0,this.cy=0,this.step=2,this.resolveReady()},update:{xycoords:function(g){g&&(this.cx=g[0],this.cy=g[1])},zoom:function(g){g&&(this._zoom=g,this._zoomWidget.hasClass('ui-slider')&&this._zoomWidget.slider('value',this._zoom))}},zoom:function(g){this.module.controller.zoom(g)},moveStart:function(g){var l,h=Date.now(),i=this,j=c(g.target||g.srcElement),k=j.hasClass('top')?'top':j.hasClass('bottom')?'bottom':j.hasClass('left')?'left':j.hasClass('right')?'right':'top',m=function(){return 3e5/(Date.now()-h+1500)+10},n=function(){'top'==k?i.cy-=i.step:'bottom'==k?i.cy+=i.step:'left'==k?i.cx-=i.step:'right'==k&&(i.cx+=i.step),i.module.controller.move(i.cx,i.cy),o()},o=function(){l=window.setTimeout(n,m())};c(document).bind('mouseup',function q(){window.clearTimeout(l),c(document).unbind('mouseup',q)}),n()},onActionReceive:{changeXY:function(g){this.cx=parseFloat(g)}}}),d});
