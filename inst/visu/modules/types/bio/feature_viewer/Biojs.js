'use strict';Biojs.MyFeatureViewer=Biojs.FeatureViewer.extend({_webservice:'http://wwwdev.ebi.ac.uk/uniprot/featureViewer/image',_dasReference:'http://www.ebi.ac.uk/das-srv/uniprot/das/uniprot/',constructor:function(b){this.base(b);try{Biojs.Utils.isEmpty(this.opt.json)||this.paintFeatures(this.opt.json)}catch(c){document.getElementById(this.opt.target).innerHTML='',document.getElementById(this.opt.target).innerHTML='No image available. Did you provide a valid UniProt accession or identifier, and valid limits?'}},opt:{dasSources:'http://www.ebi.ac.uk/das-srv/uniprot/das/uniprot',featureTypes:'',featureNames:'',imageWidth:700,imageStyle:'nonOverlapping',optionResponse:'raphael',hgrid:!1,vgrid:!1,allFeatures:!0,allRectangles:!1,allSameSize:!1,proxyUrl:'../biojs/dependencies/proxy/proxy.php'},eventTypes:[],showGeneralLegend:function(){var b=this.opt.json.configuration,c=this._webservice+'?';window.open(c)},exportFeaturesToImage:function(){var b=this.opt.json.configuration,c='';if(jQuery.browser.msie){var d='segment='+this.opt.json.segment;0!=b.requestedStart&&0!=b.requestedStop&&(d=d+':'+b.requestedStart+','+b.requestedStop),d=d+'&dasReference='+b.dasReference+'&dasSources='+b.dasSources+'&width='+b.sizeX+'&option=image&hgrid='+b.horizontalGrid+'&vgrid='+b.verticalGrid+'&style='+b.style,c=this._webservice+'?'+d,window.open(c)}else{var e=jQuery('#uniprotFeaturePainter-holder'),f=e.find('svg'),g=f.attr('width'),h=f.attr('height');f.attr('width',f.width()+'px'),f.attr('height',f.height()+'px');var i=document.getElementById('uniprotFeaturePainter-holder').innerHTML,j=document.createElement('canvas');canvg(j,i),c=j.toDataURL(),f.attr('width',f.width()+'px'),f.attr('height',h).attr('width',g),this.$imageExported=jQuery('<div id="uniprotFeaturePainter-imageExportedDiv"></div>').html('<img id="uniprotFeaturePainter-imageExported" alt="exported image" src="'+c+'"/>').dialog({autoOpen:!0,title:'Exported image',modal:!0,width:f.width()+20})}},applyStyle:function(b){if(b!=void 0&&('centered'==b||'nonOverlapping'==b||(b='rows'))){var c=this.opt.json.configuration;this.customize(b,c.horizontalGrid,c.verticalGrid)}},showHideHorizontalGrid:function(b){if(b!=void 0&&(!0==b||!1==b)){var c=this.opt.json.configuration;this.customize(c.style,b,c.verticalGrid)}},showHideVerticalGrid:function(b){if(b!=void 0&&(!0==b||!1==b)){var c=this.opt.json.configuration;this.customize(c.style,c.horizontalGrid,b)}}});
