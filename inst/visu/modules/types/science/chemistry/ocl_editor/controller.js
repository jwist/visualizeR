'use strict';define(['modules/default/defaultcontroller','openchemlib/openchemlib-full','src/util/ui'],function(a,b,c){'use strict';function d(){this.currentMol={idcode:'',coordinates:''}}return $.extend(!0,d.prototype,a),d.prototype.getToolbar=function(){var e=a.getToolbar.call(this);return e.unshift({onClick:function(){var g=$(window).width(),i=$(window).height(),j=require.toUrl('modules/types/science/chemistry/ocl_editor/help/index.html');c.dialog(`<iframe src=${j} width="100%", height="100%" frameBorder="0"></iframe>`,{width:Math.min(g-40,800),height:i-70,title:'OpenChemLib editor Help'})},title:'Help',cssClass:'fa fa-question',ifLocked:!0}),e},d.prototype.moduleInformation={name:'OCL Molecule editor',description:'Molecule editor using the openchemlib javascript library',author:'Michael Zasso',date:'11.05.2015',license:'BSD',cssClass:'ocl_editor'},d.prototype.references={mol:{label:'Molfile 2D'},molV3:{label:'Molfile V3 2D'},smiles:{label:'Smiles'},actid:{label:'OCL molecule ID'},actidOrGroup:{label:'OCL molecule ID. Distinguish racemic OR group.'}},d.prototype.variablesIn=['mol','smiles','actid'],d.prototype.events={onStructureChange:{label:'Molecular structure has changed',refVariable:['mol','molV3','smiles','actid','actidOrGroup']}},d.prototype.configurationStructure=function(){return{groups:{group:{options:{type:'list'},fields:{prefs:{type:'checkbox',title:'Options',default:['svg'],options:{queryFeatures:'Enable query features',svg:'Use SVG toolbar'}}}}}}},d.prototype.configAliases={prefs:['groups','group',0,'prefs',0]},d.prototype.onChange=function(e,f){var g=(e||' ').split(' '),i=f.getCanonizedIDCode(b.Molecule.CANONIZER_DISTINGUISH_RACEMIC_OR_GROUPS),e=g[0],j=g[1];if(i!==this.currentMol.idCodeOr||j!==this.currentMol.coordinates){this.currentMol={coordinates:j,idCode:e,idCodeOr:i};var k=f.toMolfile(),l=f.toMolfileV3(),m=f.toSmiles();this.createDataFromEvent('onStructureChange','mol',k),this.createDataFromEvent('onStructureChange','molV3',l),this.createDataFromEvent('onStructureChange','smiles',m),this.createDataFromEvent('onStructureChange','actid',{value:g[0],coordinates:g[1]}),this.createDataFromEvent('onStructureChange','actidOrGroup',{value:i,coordinates:j})}},d});
