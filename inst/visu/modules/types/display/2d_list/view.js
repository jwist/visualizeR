'use strict';define(['modules/default/defaultview','src/util/typerenderer','src/util/api','src/util/util'],function(a,b,c,d){'use strict';function f(){}return $.extend(!0,f.prototype,a,{init:function(){var h=[];h.push('<div class="ci-displaylist-list-2d"></div>'),this.dom=$(h.join('')),this.module.getDomContent().html(this.dom),this.rendererOptions=d.evalOptions(this.module.getConfiguration('rendererOptions'))||{};var j=this.module.getConfiguration('forceType');j&&(this.rendererOptions.forceType=j)},blank:{list:function(){c.killHighlight(this.module.getId()),this.dom.empty()}},inDom:function(){var h=this;this.dom.on('mouseenter mouseleave click','td',function(j){var k=$(this).index(),l=$(this).parent().index(),m=h.module.getConfiguration('colnumber',4)||4,n=l*m+k,o=h.list.get()[n];'mouseenter'===j.type?(h.module.controller.setVarFromEvent('onHover','cell','list',[n]),c.highlight(o,1)):'mouseleave'===j.type?c.highlight(o,0):'click'===j.type&&(h.module.controller.setVarFromEvent('onClick','cell','list',[n]),h.module.controller.sendActionFromEvent('onClick','cell',o))}),this.resolveReady()},update:{list:function(h){var j=this.module.getConfiguration,k=j('colnumber',4)||4,l=h.get(),m=$('<table cellpadding="3" cellspacing="0">').css('text-align','center');this.dom.html(m),this.list=l;for(var p,q,n=j('height'),o={width:Math.round(100/k)+'%',height:j('height',0)+'px'},r=0;r<l.length;r++)q=r%k,0===q&&(p=$('<tr>').appendTo(m)),this.renderElement(p,r,o,j('colorjpath',!1),j('valjpath',''))}},renderElement:function(h,j,k,l,m){var n=this,o=$('<td>').css(k).appendTo(h);this.list.getChild([j]).then(function(p){l&&p.getChild(l).then(function(q){o.css('background-color',q.get())}),b.render(o,p,m,n.rendererOptions),c.listenHighlight(p,function(q){q?o.css('border-color','black'):o.css('border-color','')},!1,n.module.getId())})}}),f});
